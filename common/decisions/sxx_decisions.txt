decision_sxx_cultivator_ship_3 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 100
		}
	}

	potential = {
		owner = { is_jindan_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_jindan
			any_owned_pop = {
				has_trait = trait_sxx_jindan
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_3
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_jindan
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_jindan
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_3 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_jindan
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_jindan
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_3 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_jindan
					}
					create_sxx_cultivator_ship_3 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_4 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 300
		}
	}

	potential = {
		owner = { is_yuanying_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_yuanying
			any_owned_pop = {
				has_trait = trait_sxx_yuanying
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_4
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_yuanying
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_yuanying
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_4 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_yuanying
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_yuanying
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_4 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_yuanying
					}
					create_sxx_cultivator_ship_4 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_5 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}

	potential = {
		owner = { is_huashen_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_huashen
			any_owned_pop = {
				has_trait = trait_sxx_huashen
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_5
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_huashen
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_huashen
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_5 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_huashen
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_huashen
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_5 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_huashen
					}
					create_sxx_cultivator_ship_5 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_6 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 3000
		}
	}

	potential = {
		owner = { is_lianxu_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_lianxu
			any_owned_pop = {
				has_trait = trait_sxx_lianxu
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_6
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_lianxu
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_lianxu
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_6 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_lianxu
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_lianxu
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_6 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_lianxu
					}
					create_sxx_cultivator_ship_6 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_7 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 10000
		}
	}

	potential = {
		owner = { is_heti_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_heti
			any_owned_pop = {
				has_trait = trait_sxx_heti
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_7
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_heti
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_heti
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_7 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_heti
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_heti
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_7 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_heti
					}
					create_sxx_cultivator_ship_7 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_8 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 30000
		}
	}

	potential = {
		owner = { is_dacheng_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_dacheng
			any_owned_pop = {
				has_trait = trait_sxx_dacheng
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_8
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_dacheng
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dacheng
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_8 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_dacheng
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dacheng
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_8 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dacheng
					}
					create_sxx_cultivator_ship_8 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_9 = {
	icon = decision_sxx_cultivator_ship
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 100000
		}
	}

	potential = {
		owner = { is_dujie_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_no_dujie
			any_owned_pop = {
				has_trait = trait_sxx_dujie
			#	is_sxx_cultivable = yes
				NOT = { has_job = criminal }
				is_being_purged = no
				is_being_assimilated = no
				is_sapient = yes
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_ship_9
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_dujie
						has_trait = trait_zombie
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dujie
						has_trait = trait_zombie
					}
					create_sxx_cultivator_ship_9 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else_if = {
				limit = {
					any_owned_pop = {
						has_trait = trait_sxx_dujie
						has_trait = trait_sxx_potential_depletion
					}
				}
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dujie
						has_trait = trait_sxx_potential_depletion
					}
					create_sxx_cultivator_ship_9 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
			else = {
				random_owned_pop = {
					limit = {
						has_trait = trait_sxx_dujie
					}
					create_sxx_cultivator_ship_9 = yes
					resettle_pop = {
						pop = this
						planet = event_target:sxx_pool_planet
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_cultivator_ship_return = {
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { is_jindan_country = yes }
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_controlled
			controller = {
				is_same_value = prev.owner
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_cultivator_ship_return_conditions
			any_fleet_in_orbit = {
				exists = owner
				owner = {
					is_same_value = prev.controller
					is_same_value = prevprev.owner
				}
				any_owned_ship = { is_ship_size = sxx_cultivator }
			}
		}
	}

	effect = {
		custom_tooltip = decision_sxx_create_cultivator_pop
		hidden_effect = {
			every_fleet_in_orbit = {
				limit = {
					exists = owner
					owner = {
						is_same_value = prev.controller
						is_same_value = prevprev.owner
					}
					any_owned_ship = { is_ship_size = sxx_cultivator }
				}
				if = {
					limit = {
						exists = leader
						NOT = { any_owned_ship = { NOT = { is_ship_size = sxx_cultivator } } }
					}
					leader = {
						unassign_leader = this
					}
				}
				every_owned_ship = {
					limit = {
						is_ship_size = sxx_cultivator
					}
					event_target:sxx_pool_planet = {
						random_owned_pop = {
							limit = {
								has_pop_flag = sxx_cultivator_of@prevprev
							}
							resettle_pop = {
								pop = this
								planet = root
							}
							remove_pop_flag = sxx_cultivator_of@prevprev
						}
					}
					delete_ship = this
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_xueming = {
	icon = decision_surreal_visions
	sound = event_death_cult_01
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = {
			has_valid_civic = civic_sxx_evil_way
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = decision_sxx_xueming_no_building
			OR = {
				has_building = building_sxx_xuemingbei_0
				has_building = building_sxx_xuemingbei_1
			}
		}
	#	sxx_planet_has_zongmen = yes
	#	sxx_planet_has_upgraded_xuemingbei = yes
		custom_tooltip = {
			fail_text = decision_sxx_xueming_not_enough
			check_variable = {
				which = sxx_evil_break_count
				value > 0
			}
		}
		custom_tooltip = {
			fail_text = decision_sxx_xueming_cooldown
			NOT = { has_planet_flag = sxx_recently_xueming }
		}
	}

	effect = {
		custom_tooltip = decision_sxx_xueming_tooltip
		hidden_effect = {
		#	switch = { # 前2数之和减去第4个数
		#		trigger = has_active_building
		#		building_sxx_xuemingbei_1 = { change_variable = { which = sxx_evil_break_count value = 1 } }
		#		building_sxx_xuemingbei_2 = { change_variable = { which = sxx_evil_break_count value = 2 } }
		#		building_sxx_xuemingbei_3 = { change_variable = { which = sxx_evil_break_count value = 3 } }
		#		building_sxx_xuemingbei_4 = { change_variable = { which = sxx_evil_break_count value = 4 } }
		#		building_sxx_xuemingbei_5 = { change_variable = { which = sxx_evil_break_count value = 6 } }
		#		building_sxx_xuemingbei_6 = { change_variable = { which = sxx_evil_break_count value = 8 } }
		#		building_sxx_xuemingbei_7 = { change_variable = { which = sxx_evil_break_count value = 11 } }
		#		building_sxx_xuemingbei_8 = { change_variable = { which = sxx_evil_break_count value = 15 } }
		#		building_sxx_xuemingbei_9 = { change_variable = { which = sxx_evil_break_count value = 20 } }
		#		building_sxx_xuemingbei_10 = { change_variable = { which = sxx_evil_break_count value = 27 } }
		#		building_sxx_xuemingbei_11 = { change_variable = { which = sxx_evil_break_count value = 36 } }
		#		building_sxx_xuemingbei_12 = { change_variable = { which = sxx_evil_break_count value = 48 } }
		#		building_sxx_xuemingbei_13 = { change_variable = { which = sxx_evil_break_count value = 64 } }
		#		building_sxx_xuemingbei_14 = { change_variable = { which = sxx_evil_break_count value = 85 } }
		#		building_sxx_xuemingbei_15 = { change_variable = { which = sxx_evil_break_count value = 113 } }
		#		building_sxx_xuemingbei_16 = { change_variable = { which = sxx_evil_break_count value = 150 } }
		#		building_sxx_xuemingbei_17 = { change_variable = { which = sxx_evil_break_count value = 199 } }
		#		building_sxx_xuemingbei_18 = { change_variable = { which = sxx_evil_break_count value = 264 } }
		#		building_sxx_xuemingbei_19 = { change_variable = { which = sxx_evil_break_count value = 350 } }
		#		building_sxx_xuemingbei_20 = { change_variable = { which = sxx_evil_break_count value = 464 } }
		#		building_sxx_xuemingbei_21 = { change_variable = { which = sxx_evil_break_count value = 615 } }
		#		building_sxx_xuemingbei_22 = { change_variable = { which = sxx_evil_break_count value = 815 } }
		#		building_sxx_xuemingbei_23 = { change_variable = { which = sxx_evil_break_count value = 1080 } }
		#		building_sxx_xuemingbei_24 = { change_variable = { which = sxx_evil_break_count value = 1431 } }
		#		building_sxx_xuemingbei_25 = { change_variable = { which = sxx_evil_break_count value = 1896 } }
		#	}
		#	sxx_downgrade_xuemingbei = yes
			set_timed_planet_flag = {
				flag = sxx_recently_xueming
				days = 3600
			}
			planet_event = { id = sxx_event.110 }
		}
	}

	ai_weight = {
		weight = 500
	}
}


decision_sxx_suoling = {
	icon = decision_strategic_resources
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { is_sxx_sect = yes }
		NOT = { has_modifier = sxx_suoling_modifier }
	}

	effect = {
		add_modifier = { modifier = sxx_suoling_modifier }
	}

	ai_weight = {
		weight = 500
		modifier = {
			factor = 0
			is_huashen_planet = no
		}
	}
}

decision_sxx_suoling_delete = {
	icon = decision_strategic_resources
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { is_sxx_sect = yes }
		has_modifier = sxx_suoling_modifier
	}

	effect = {
		remove_modifier = sxx_suoling_modifier
	}

	ai_weight = {
		weight = 500
		modifier = {
			factor = 0
			is_huashen_planet = yes
		}
	}
}

decision_sxx_add_linggen = {
	icon = descision_progenitor_empty
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { has_origin = origin_sxx_yuhua }
	}

	effect = {
		custom_tooltip = decision_sxx_add_linggen_tooltip
		hidden_effect = {
			every_owned_pop = {
				limit = {
					sxx_pop_is_not_under_lianqi = no
				}
				modify_species = {
					species = this
					add_trait = trait_sxx_linggen
				}
			}
		}
	}

	ai_weight = {
		weight = 100
		modifier = {
			factor = 0
			has_modifier = sxx_add_linggen_modifier
		}
	}
}

decision_sxx_add_linggen_auto = {
	icon = descision_progenitor_empty
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { has_origin = origin_sxx_yuhua }
		NOT = { has_modifier = sxx_add_linggen_modifier }
	}

	effect = {
		add_modifier = { modifier = sxx_add_linggen_modifier }
	}

	ai_weight = {
		weight = 500
	}
}

decision_sxx_add_linggen_auto_delete = {
	icon = descision_progenitor_empty
	owned_planets_only = yes

	resources = {
		category = decisions
	}

	potential = {
		owner = { has_origin = origin_sxx_yuhua }
		has_modifier = sxx_add_linggen_modifier
	}

	effect = {
		remove_modifier = sxx_add_linggen_modifier
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_yuhua = {
	owned_planets_only = yes
	sound = event_screams

	resources = {
		category = decisions
	}

	potential = {
		owner = { has_origin = origin_sxx_yuhua }
	}

	allow = {
		any_owned_pop = {
			has_trait = trait_sxx_linggen
			sxx_pop_is_not_under_huashen = yes
		}
	}

	effect = {
		custom_tooltip = decision_sxx_yuhua_effect
		hidden_effect = {
			every_owned_pop = {
				limit = {
					has_trait = trait_sxx_linggen
					sxx_pop_is_not_under_huashen = yes
				}
				planet = { create_pop = { species = owner_main_species } }
				last_created_pop = {
					pop_sxx_set_mortal = yes
					prev = {
						switch = {
							trigger = has_trait
							trait_sxx_huashen = {
								prev = {
									modify_species = {
										species = this
										add_trait = trait_sxx_huashen
									}
								}
							}
							trait_sxx_lianxu = {
								prev = {
									modify_species = {
										species = this
										add_trait = trait_sxx_lianxu
									}
								}
							}
							trait_sxx_heti = {
								prev = {
									modify_species = {
										species = this
										add_trait = trait_sxx_heti
									}
								}
							}
							trait_sxx_dacheng = {
								prev = {
									modify_species = {
										species = this
										add_trait = trait_sxx_dacheng
									}
								}
							}
						}
					}
				}
				owner = { country_event = { id = sxx_origins.7 } }
				if = {
					limit = {
						owner = { is_reanimator = yes }
					}	
					modify_species = {
						species = this
						remove_trait = trait_sxx_potential_depletion
						remove_trait = trait_sxx_linggen
					}
				}
				else = {
					kill_pop = yes
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

decision_sxx_choose_furnace_build_planet = {
	resources = {
		category = decisions
	}

	potential = {
		exists = space_owner
		exists = from
		space_owner = { is_same_value = from }
		NOT = { exists = owner }
		from = {
			has_technology = tech_sxx_star_furnace
			is_sxx_sect = yes
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = sxx_star_furnace_1
					is_megastructure_type = sxx_star_furnace_2
					is_megastructure_type = sxx_star_furnace_3
					is_megastructure_type = sxx_star_furnace_4
					is_megastructure_type = sxx_star_furnace_5
					is_megastructure_type = sxx_star_furnace_6
					is_megastructure_type = sxx_star_furnace_7
					is_megastructure_type = sxx_star_furnace_8
					is_megastructure_type = sxx_star_furnace_9
				}
			}
			NOT = {
				any_planet_within_border = {
					has_modifier = sxx_furnace_build_chosen
				}
			}
		}
	}

	allow = {
		planet_size >= 20
		OR = {
			uninhabitable_regular_planet = yes
			habitable_planet = yes
			is_planet_class = pc_nuked
			is_planet_class = pc_hive
			is_planet_class = pc_machine
		}
		NOT = { has_modifier = sxx_furnace_artifice_chosen }
	}

	effect = {
		custom_tooltip = decision_sxx_choose_furnace_build_planet_effect
		hidden_effect = {
			add_modifier = { modifier = sxx_furnace_build_chosen }
		}
	}

	ai_weight = {
		weight = 500
		modifier = {
			factor = 0
			OR = {
				habitable_planet = yes
				is_planet_class = pc_nuked
				is_planet_class = pc_hive
				is_planet_class = pc_machine
			}
		}
	}
}

decision_sxx_choose_furnace_artifice_planet = {
	resources = {
		category = decisions
	}

	potential = {
		exists = space_owner
		exists = from
		space_owner = { is_same_value = from }
		NOT = { exists = owner }
		from = {
			is_sxx_sect = yes
			any_owned_megastructure = {
				is_megastructure_type = sxx_star_furnace_10
			}
			NOT = {
				any_planet_within_border = {
					has_modifier = sxx_furnace_artifice_chosen
				}
			}
		}
	}

	allow = {
		OR = {
			uninhabitable_regular_planet = yes
			habitable_planet = yes
			is_planet_class = pc_nuked
			is_planet_class = pc_hive
			is_planet_class = pc_machine
		}
		planet_size > 1
		NOT = { has_modifier = sxx_furnace_build_chosen }
	}

	effect = {
		custom_tooltip = decision_sxx_choose_furnace_artifice_planet_effect
		hidden_effect = {
			add_modifier = { modifier = sxx_furnace_artifice_chosen }
			change_pc = pc_molten
			clear_deposits = yes
			planet_event = { id = sxx_event.250 days = 30 }
		}
	}

	ai_weight = {
		weight = 100
		modifier = {
			factor = 0
			OR = {
				habitable_planet = yes
				is_planet_class = pc_nuked
				is_planet_class = pc_hive
				is_planet_class = pc_machine
			}
		}
		modifier = {
			factor = 0
			from = {
				NOR = {
					has_deficit = minerals
					has_deficit = sxx_pills
				}
			}
		}
	}
}